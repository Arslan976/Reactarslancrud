(this.webpackJsonppracfour=this.webpackJsonppracfour||[]).push([[0],{107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(9),l=a.n(c),o=a(8),u=a(6),i=a.n(u),s=a(23),m=a.n(s),d=a(26),p=a(133),E=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.authReducer.userData})),a=Object(o.c)((function(e){return e.authReducer.isAuth}));localStorage.getItem("token");return r.a.createElement("nav",{style:{height:"100px",width:"100%",display:"flex",justifyContent:"space-around",padding:"0 50px"}},r.a.createElement("h1",null,t?t.name:"Please Login"),a?r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(p.a,{variant:"contained",color:"primary",onClick:function(){e((function(e){return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.removeItem("token"),e({type:"LOGOUT_ACTION"});case 2:case"end":return t.stop()}}))}))}},"Logout"))):r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.a,{to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(d.a,{to:"/register"},"Register"))))},f=a(21),g=a(15),h=a(137),O=a(145),y=a(138),b=a(139),j=a(140),R=a(141),v=a(142),I=a(143),A=a(144),k=a(147),x=a(66),T=a.n(x),_=function(e){var t=Object(o.b)(),a=Object(n.useState)(""),c=Object(g.a)(a,2),l=c[0],u=c[1],s=Object(o.c)((function(e){return e.itemReducer.items})),d=Object(o.c)((function(e){return e.itemReducer.loading})),E=Object(o.c)((function(e){return e.authReducer.isAuth}));return Object(n.useEffect)((function(){!s&&t((function(e){var t;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i.a.awrap(m.a.get("https://assignmentforoffice.herokuapp.com/api/items"));case 2:t=a.sent,console.log(t),e({type:"GET_DATA",payload:t.data});case 5:case"end":return a.stop()}}))}))}),[t]),E?d?r.a.createElement("h1",null,"Loading......."):r.a.createElement(n.Fragment,null,r.a.createElement(h.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(O.a,{value:l,onChange:function(e){return u(e.target.value)},label:"Add Item",variant:"outlined"}),r.a.createElement(p.a,{style:{marginTop:10},onClick:function(){return t(function(e){return function(t,a){var n,r;return i.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n={itemName:e},c.next=3,i.a.awrap(m.a.post("https://assignmentforoffice.herokuapp.com/api/items",n,{headers:{"Content-Type":"application/json","x-auth-token":a().authReducer.token}}));case 3:r=c.sent,console.log(r),t({type:"ADD_ITEM",payload:r.data});case 6:case"end":return c.stop()}}))}}(l))},variant:"contained",color:"primary"},"Add")),r.a.createElement(y.a,null,r.a.createElement("h1",{style:{textAlign:"center"}},"My Items"),r.a.createElement(b.a,null,r.a.createElement(j.a,null,r.a.createElement(R.a,null,r.a.createElement(v.a,null,"Index"),r.a.createElement(v.a,null,"Name"),r.a.createElement(v.a,null,"Date"),r.a.createElement(v.a,null,"Delete"))),r.a.createElement(I.a,null,s&&s.map((function(e,a){return r.a.createElement(R.a,{key:e._id},r.a.createElement(v.a,null,a+1),r.a.createElement(v.a,null,e.name),r.a.createElement(v.a,null,r.a.createElement(T.a,{date:e.date,format:"YYYY/MM/DD"})),r.a.createElement(v.a,null,r.a.createElement(A.a,null,r.a.createElement(k.a,{color:"primary",fontSize:"large",onClick:function(){var a;t((a=e._id,function(e,t){return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i.a.awrap(m.a.delete("https://assignmentforoffice.herokuapp.com/api/items/".concat(a),{headers:{"Content-Type":"application/json","x-auth-token":t().authReducer.token}}));case 2:n.sent,console.log("token",t().authReducer.token),e({type:"DELETE_ITEM",payload:a});case 5:case"end":return n.stop()}}))}))}}))))})))))):r.a.createElement(f.a,{to:"/"})},w=a(148),S=a(146),D=a(42),L=function(e){var t=Object(o.b)(),a=Object(D.a)({mode:"onChange"}),c=a.handleSubmit,l=a.errors,u=a.register,s=Object(n.useState)(""),d=Object(g.a)(s,2),E=(d[0],d[1],Object(n.useState)("")),y=Object(g.a)(E,2),b=(y[0],y[1],Object(n.useState)(!1)),j=Object(g.a)(b,2),R=j[0],v=j[1],I=Object(n.useState)(null),A=Object(g.a)(I,2),k=A[0],x=A[1],T=Object(o.c)((function(e){return e.authReducer.errormsg})),_=(Object(o.c)((function(e){return e.authReducer.userData})),Object(o.c)((function(e){return e.authReducer.loading}))),L=Object(o.c)((function(e){return e.authReducer.isAuth}));return Object(n.useEffect)((function(){T&&x(T)}),[T]),L?r.a.createElement(f.a,{to:"/main"}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"500px",width:"100%",justifyContent:"center",alignItems:"center"}},_?r.a.createElement("h1",null,"Loading ..."):r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"Login"),k&&r.a.createElement("p",{style:{color:"red"}},k),r.a.createElement("form",{onSubmit:c((function(e){return t(function(e,t){return function(a){var n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a((function(e){e({type:"LOADING_ACTION"})})),a({type:"LOGIN_ERROR",payload:null}),r.prev=2,r.next=5,i.a.awrap(m.a.post("https://assignmentforoffice.herokuapp.com/api/auth",e));case 5:n=r.sent,console.log(n),a({type:"LOGIN_PROCESS",payload:n.data}),t&&localStorage.setItem("token",n.data.token),$.push("/"),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(2),a({type:"LOGIN_ERROR",payload:r.t0.response.data.msg});case 15:a((function(e){e({type:"LOADING_ACTION"})}));case 16:case"end":return r.stop()}}),null,null,[[2,12]])}}(e,R))}))},r.a.createElement(h.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(O.a,{name:"email",inputRef:u({required:"This Field is Requried",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Invalid email address"}}),label:"Enter Email Address",variant:"outlined",color:"primary"}),l.email&&r.a.createElement("p",null," ",l.email.message),r.a.createElement(O.a,{name:"password",inputRef:u({required:"This Field is Requried"}),style:{margin:"20px 0"},label:"Enter Password",variant:"outlined",color:"primary",type:"password"}),l.password&&r.a.createElement("p",null," ",l.password.message),r.a.createElement(w.a,{control:r.a.createElement(S.a,{checked:R,value:"checkedB",color:"primary",onChange:function(){return v(!R)}}),label:"Keep me Login"}),r.a.createElement(p.a,{variant:"contained",color:"primary",type:"submit"},"Login")))))},C=function(e){var t=Object(o.b)(),a=Object(D.a)({mode:"onChange"}),c=a.handleSubmit,l=a.errors,u=a.register,s=Object(n.useState)(""),d=Object(g.a)(s,2),E=(d[0],d[1],Object(n.useState)("")),y=Object(g.a)(E,2),b=(y[0],y[1],Object(n.useState)("")),j=Object(g.a)(b,2),R=(j[0],j[1],Object(n.useState)(null)),v=Object(g.a)(R,2),I=v[0],A=v[1],k=Object(o.c)((function(e){return e.registerReducer.errormsg})),x=(Object(o.c)((function(e){return e.registerReducer.userData})),Object(o.c)((function(e){return e.registerReducer.loading}))),T=Object(o.c)((function(e){return e.authReducer.isAuth}));return Object(n.useEffect)((function(){k&&A(k)}),[k]),T?r.a.createElement(f.a,{to:"/login"}):x?r.a.createElement("section",null,r.a.createElement("h1",null,"Loading..........")):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"500px",width:"100%",justifyContent:"center",alignItems:"center"}},r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"Register"),I&&r.a.createElement("p",{style:{color:"red"}},I),r.a.createElement("form",{onSubmit:c((function(e){return t(function(e){return function(t){var a;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t((function(e){e({type:"REGISTER_LOADING_ACTION"})})),t({type:"REGISTER_ERROR",payload:null}),n.prev=2,n.next=5,i.a.awrap(m.a.post("https://assignmentforoffice.herokuapp.com/api/users",e));case 5:a=n.sent,console.log(a),t({type:"REGISTER_PROCESS",payload:a.data}),localStorage.setItem("token",a.data.token),$.push("/"),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),t({type:"REGISTER_ERROR",payload:n.t0.response.data.msg});case 15:t((function(e){e({type:"REGISTER_LOADING_ACTION"})}));case 16:case"end":return n.stop()}}),null,null,[[2,12]])}}(e))}))},r.a.createElement(h.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(O.a,{style:{margin:10},name:"name",inputRef:u({required:"This Field is Requried",pattern:{value:/[a-zA-Z][a-zA-Z0-9-_]{3,32}/,message:"Invalid Name"}}),label:"Enter Username",variant:"outlined",color:"primary"}),l.name&&r.a.createElement("p",null,l.name.message),r.a.createElement(O.a,{style:{margin:10},name:"email",inputRef:u({required:"This Field is Requried",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i,message:"Invalid email address"}}),label:"Enter Email Address",variant:"outlined",color:"primary"}),l.email&&r.a.createElement("p",null,l.email.message),r.a.createElement(O.a,{style:{margin:10},name:"password",inputRef:u({required:"This Field is Requried"}),label:"Enter Password",variant:"outlined",color:"primary",type:"password"}),r.a.createElement(p.a,{style:{margin:10},variant:"contained",color:"primary",type:"submit"},"Register")))))},G=function(e){var t=Object(o.b)(),a=Object(o.c)((function(e){return e.itemReducer.loading}));return Object(n.useEffect)((function(){localStorage.getItem("token")&&t((function(e){var t;return i.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e((function(e){e({type:"LOADING_ACTION"})})),a.next=3,i.a.awrap(m.a.get("https://assignmentforoffice.herokuapp.com/api/auth/user",{headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}}));case 3:t=a.sent,console.log(t),e({type:"KEEP_ME_LOGGED",payload:t.data}),e((function(e){e({type:"LOADING_ACTION"})}));case 7:case"end":return a.stop()}}))})),console.log("gaaajnaj")})),a?r.a.createElement("h1",null,"Loading......."):r.a.createElement(n.Fragment,null,r.a.createElement(E,null),r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/",exact:!0,render:function(){return r.a.createElement(L,null)}}),r.a.createElement(f.b,{path:"/main",exact:!0,render:function(){return r.a.createElement(_,null)}}),r.a.createElement(f.b,{path:"/register",exact:!0,render:function(){return r.a.createElement(C,null)}}),r.a.createElement(f.b,{path:"*",exact:!0,render:function(){return r.a.createElement(C,null)}})))},N=a(31),q=a(67),F=a(18),M=a(17),P=a(25),Z={isLoading:!0,items:null},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_DATA":return Object(P.a)({},e,{items:t.payload,isLoading:!1});case"DELETE_ITEM":return Object(P.a)({},e,{items:e.items.filter((function(e){return e._id!=t.payload}))});case"ADD_ITEM":return Object(P.a)({},e,{items:[].concat(Object(M.a)(e.items),[t.payload])});default:return e}},z={userData:null,isAuth:!1,token:localStorage.getItem("token"),errormsg:null,loading:!1},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return Object(P.a)({},e,{isAuth:!1,userData:null,token:null,errormsg:t.payload});case"LOGIN_PROCESS":return Object(P.a)({},e,{isAuth:!0,userData:t.payload.user,token:t.payload.token});case"LOADING_ACTION":return Object(P.a)({},e,{loading:!e.loading});case"LOGOUT_ACTION":return Object(P.a)({},e,{isAuth:!1,userData:null,errormsg:null,token:null});case"KEEP_ME_LOGGED":return Object(P.a)({},e,{isAuth:!0,userData:t.payload});default:return e}},K=Object(N.c)({itemReducer:Y,authReducer:B,registerReducer:B,tokenReducer:B});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.d(t,"history",(function(){return $}));var U=Object(N.e)(K,Object(N.d)(Object(N.a)(q.a))),$=Object(F.a)();l.a.render(r.a.createElement(f.c,{history:$},r.a.createElement(o.a,{store:U},r.a.createElement(G,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},77:function(e,t,a){e.exports=a(107)}},[[77,1,2]]]);
//# sourceMappingURL=main.158717d0.chunk.js.map